## HTTP status code

> 클라우드 환경에서 HTTP API를 통해 통신하는 것이 대부분임
>
> 이때, 응답 상태 코드를 통해 성공/실패 여부를 확인할 수 있으므로 API 문서를 작성할 때 꼭 알아야 할 것이 HTTP status code다

<br>

1xx, 2xx, 3xx, 4xx, 5xx로 나누어 볼수 있다. 즉, 3자리 숫자의 첫번째 값(코드)만 보고도 어떤 종류의 응답인지 알 수 있는데, 이 첫번째 값을 ***Response Class***라고 한다.

<br>

| Response Class Code | Response Class 의미 | 설명 |
|:---:|:---:|:---:|
| 1 | Informational (정보) | 리퀘스트를 받고, 처리 중에 있음. |
| 2 | Success (성공)| 리퀘스트를 정상적으로 처리함.|
| 3 | Redirection (리디렉션) | 리퀘스트 완료를 위해 추가 동작이 필요함.|
| 4 | Client Error (클라이언트 오류) | 클라이언트 요청을 처리할 수 없어 오류 발생 |
| 5 | Server Error (서버 오류) | 서버에서 처리를 하지 못하여 오류 발생 |

> 4xx 에러는 클라이언트의 잘못된 요청으로 서버에서 처리하지 못한 것이고, 5xx 에러는 클라이언트의 요청은 문제가 없으나, 서버에서 처리중에 서버 문제로 인해 오류가 발생한 것이라는 차이가 있다.

<br>
에러 코드 발생 예
<img src="https://evan-moon.github.io/static/581d5098769863da7581ecc2a09a19ed/d7ab4/browser-response.png" width="500"/><br>

<br>

##### 100번대 : 조건부 응답

| 상태코드 |    이름     |           의미           |
| :------: | :---------: | :----------------------: |
|100| Continue | 요청자는 요청을 계속해야 한다. 서버는 이 코드를 제공하여 요청의 첫 번째 부분을 받았으며 나머지를 기다리고 있음을 나타낸다. |

##### 200번대 : 통신 성공

| 상태코드 |    이름     |           의미           |
| :--------: | :---------: | :----------------------: |
|   200    |     OK      |      요청이 성공적으로 수행되었음을 의미. 주로 GET 요청에 대한 응답.      |
|   201    |   Create    |     요청이 성공적으로 수행되었으며, 그 결과로 새로운 리소스가 생성됨을 의미. 주로 POST 요청에 대한 응답.      |
|   202    |  Accepted   | 요청은 접수되었지만, 처리는 완료되지 않음을 의미. 배치 처리와 같이 요청 접수 후 일정 시간이 지난 후 요청을 처리하는 경우의 응답. |
|   204    | No Contents |  요청이 성공적으로 수행되었고, 응답 payload에 보낼 데이터가 없음을 의미. 주로 삭제 요청에 대한 응답으로 사용됨.   |

<br>

##### 300번대 : 리다이렉트
| 상태코드 |       이름       |             의미              |
| :--------: | :--------------: | :---------------------------: |
|   300    | Multiple Choice  | 요청 URI에 하나 이상의 리소스가 존재함을 의미. |
|   301    | Move Permanently |  요청한 리소스의 URI가 변경되었음을 의미. 해당 응답을 받으면, 브라우저는 HTTP 헤더에 들어있는 Location 필드를 찾아 해당 필드가 존재할 경우, Location 필드에 담긴 URL로 자동으로 리다이렉션함.  |
|   302    |	Found  |	요청한 리소스의 URI가 일시적으로 변경되었음을 의미합니다. |
|   304    |   Not Modified  |    수정되지 않음을 의미. 해당 응답을 받으면, 클라이언트는 서버로부터 리소스를 재전송 받지 않고, 캐싱된 리소스를 사용함.    |
|   307    |	Temporary Redirect	|  302와 유사하며, User-Agent가 반드시 HTTP 메소드를 변경하지 말아야 한다는 점만 다릅니다. |
|   308    |	Permanent Redirect  |	301과 유사하며, User-Agent가 반드시 HTTP 메소드를 변경하지 말아야 한다는 점만 다릅니다. |


> #### 301, 302 vs. 308, 307
> 
> 307은 302와 유사하고, 308은 301과 유사하다. 차이점은 307, 308은 전송 받은 HTTP Method를 유지한다는 것이다. 301과 302는 리다이렉트시킬 때 HTTP 메소드를 GET으로 바꿔서 전송한다. 따라서 GET 요청을 보낼 때는 문제가 없지만, POST 요청을 했을 때 문제가 발생할 수 있다.
> 
> 예를 들어, HTTP -> HTTPS로 리다이렉트를 구현할 때, 301 또는 302를 쓰게 되면 HTTP 프로토콜을 통해 POST 요청한 것이 HTTPS 프토토콜을 통해 GET 요청으로 변경되면서 컨트롤러나 라우터에 매핑되는 URI가 없어서 오류가 나게 된다. 따라서 301 대신에 308을, 302 대신에 307을 쓰면 좀 더 안전하게 리다이렉트시킬 수 있다.



<br>

##### 400번대 : 클라이언트 오류

| 상태코드 |        이름        |               의미                |
| :--------: | :----------------: | :-------------------------------: |
|   400    |    Bad Request     | 잘못된 문법 등으로 인해 클라이언트가 올바르지 못한 요청을 보내 서버가 요청을 이해할 수 없음을 의미. |
|   401    |    Unauthorized    | 인증되지 않은 사용자가 인증이 필요한 리소스를 요청하는 경우. 보통 로그인이 필요한 API를 비로그인 사용자가 호출했을 때 사용 |
|   403    |     Forbidden      | 클라이언트가 콘텐츠에 접근할 권한을 가지고 있지 않음을 의미. 401과 다른 점은 서버가 클라이언트가 누구인지 알고 있다는 것으로, 보통 특정 IP나 국가가 차단되어 있는 사이트에 접속을 시도한 경우 사용 |
|   404    |     Not Found      |   요청 URI에 대한 리소스 존재X    |
|   405    | Method Not Allowed | API에서 정의되지 않은 메소드 호출. ex) GET 요청만 허용되는데 POST 요청을 한 경우 |
|   406    |   Not Acceptable   | 알맞은 컨텐츠 타입이 없음. 서버의 리소스가 클라이언트의 HTTP 헤더에 들어있는 Accept 필드에 명시된 콘텐츠 타입이 아닌 경우의 응답.  |
|   408    |  Request Timeout   |        요청 대기 시간 초과        |
|   409    |      Conflict      | 요청이 현재 서버의 상태와 충돌 |
|   429    |  Too Many Request  |        요청 횟수 상한 초과      |

<br>

##### 500번대 : 서버 오류

| 상태코드 |         이름          |         의미         |
| :--------: | :-------------------: | :------------------: |
|   500    | Internal Server Error | 서버에 오류가 발생하여 응답할 수 없음. 서버에 오류가 발생했으나 처리 방법을 알 수 없을 경우의 응답. |
|   502    |      Bad Gateway      |   서버가 게이트웨이로부터 잘못된 응답을 수신했음을 의미. 서버의 부모 서버에서 오류가 발생한 경우의 응답. 보통 서버에 접속하는 사용자가 많아 과부하될 때 발생.   |
|   503    |  Service Unavailable  |   서버가 요청을 처리할 준비가 되지 않음. 일반적으로 유지보수를 위해 작동이 중단되거나 과부하가 걸린 경우의 응답.   |
|   504    |    Gateway Timeout    | 서버가 게이트웨이 역할을 하고 있으며, 한 서버가 액세스하고 있는 다른 서버에서 적시에 응답을 받지 못했음을 의미.
 |

<br>

참고 링크 : https://ko.wikipedia.org/wiki/HTTP_%EC%83%81%ED%83%9C_%EC%BD%94%EB%93%9C
